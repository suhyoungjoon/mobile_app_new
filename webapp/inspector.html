<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>점검원 - 하자 점검</title>
  <meta name="theme-color" content="#1e88e8" />
  <link rel="stylesheet" href="css/style.css" />
  <style>
    .inspector-header {
      background: linear-gradient(135deg, #1e88e8 0%, #1565c0 100%);
      color: white;
      padding: 16px;
      text-align: center;
    }
    .inspector-header h1 {
      margin: 0;
      font-size: 20px;
      font-weight: 700;
    }
    .inspector-header .subtitle {
      font-size: 12px;
      opacity: 0.9;
      margin-top: 4px;
    }
    .defect-card {
      background: white;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 12px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .defect-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }
    .defect-card-title {
      font-weight: 700;
      font-size: 16px;
      color: #111827;
    }
    .defect-card-meta {
      font-size: 12px;
      color: #6b7280;
    }
    .defect-card-content {
      margin-bottom: 12px;
    }
    .defect-card-content .label {
      font-size: 12px;
      color: #6b7280;
      margin-bottom: 4px;
    }
    .defect-card-content .value {
      font-size: 14px;
      color: #111827;
      margin-bottom: 8px;
    }
    .inspection-badge {
      display: inline-block;
      background: #10b981;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 11px;
      margin-right: 4px;
    }
    .inspection-badge.pending {
      background: #f59e0b;
    }
  </style>
</head>
<body>
<div class="container">
  <!-- HEADER -->
  <div class="inspector-header">
    <h1>점검원 하자 점검</h1>
    <div class="subtitle">하자목록 조회 및 점검결과 입력</div>
  </div>

  <div class="content">
    <!-- LOGIN -->
    <div id="login" class="screen">
      <div class="card">
        <div class="label">아파트(단지)</div>
        <input id="login-complex" class="input" placeholder="admin" />
        <div class="row" style="margin-top:8px;">
          <div class="col">
            <div class="label">동</div>
            <input id="login-dong" class="input" placeholder="101" />
          </div>
          <div class="col">
            <div class="label">호</div>
            <input id="login-ho" class="input" placeholder="1203" />
          </div>
        </div>
        <div class="row" style="margin-top:8px;">
          <div class="col">
            <div class="label">성명</div>
            <input id="login-name" class="input" placeholder="점검원" />
          </div>
          <div class="col">
            <div class="label">전화번호</div>
            <input id="login-phone" class="input" placeholder="010-0000-0000" />
          </div>
        </div>
        <div class="hr"></div>
        <button class="button" onclick="onLogin()">로그인</button>
        <div style="margin-top: 12px; padding: 12px; background: #f0f8ff; border-radius: 8px; font-size: 12px; color: #1e88e8;">
          <strong>⚠️ 점검원 전용</strong><br/>
          아파트(단지) 항목에 <strong>"admin"</strong>을 입력해야 합니다.
        </div>
      </div>
    </div>

    <!-- DEFECT LIST (하자목록 전체) -->
    <div id="defect-list" class="screen hidden">
      <div class="screen-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
        <h2 style="margin: 0;">하자목록 전체</h2>
        <button class="button ghost" onclick="onLogout()" style="width: auto; padding: 8px 12px;">로그아웃</button>
      </div>
      
      <div id="defect-list-container">
        <!-- 하자 목록이 여기에 표시됩니다 -->
      </div>
    </div>

    <!-- DEFECT INSPECTION (점검결과 입력) -->
    <div id="defect-inspection" class="screen hidden">
      <div class="screen-header">
        <button class="back-btn" onclick="goBack()">← 뒤로</button>
        <h2>점검결과 입력</h2>
        <div></div>
      </div>
      <div class="card">
        <!-- 하자 정보 표시 -->
        <div id="defect-inspection-info" class="defect-info" style="padding: 16px; background: #f5f5f5; border-radius: 8px; margin-bottom: 16px;">
          <div class="label">하자 정보</div>
          <div id="defect-inspection-details"></div>
        </div>

        <!-- 측정 타입 선택 탭 -->
        <div class="equipment-tabs">
          <button class="equipment-tab active" onclick="showDefectInspectionTab('air')">공기질</button>
          <button class="equipment-tab" onclick="showDefectInspectionTab('radon')">라돈</button>
          <button class="equipment-tab" onclick="showDefectInspectionTab('level')">레벨기</button>
        </div>

        <!-- 공기질 탭 -->
        <div id="defect-air-tab" class="equipment-tab-content">
          <div class="form-group">
            <label class="form-label">위치</label>
            <input id="defect-air-location" class="input" placeholder="예: 거실, 침실" />
          </div>
          
          <div class="form-group">
            <label class="form-label">공정</label>
            <input id="defect-air-trade" class="input" placeholder="예: 마감, 바닥재" />
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">TVOC (mg/m³)</label>
              <input id="defect-air-tvoc" type="number" step="0.01" min="0" max="20" class="input" placeholder="0.00" />
            </div>
            <div class="form-group">
              <label class="form-label">HCHO (mg/m³)</label>
              <input id="defect-air-hcho" type="number" step="0.01" min="0" max="20" class="input" placeholder="0.00" />
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">CO2 (ppm)</label>
            <input id="defect-air-co2" type="number" min="0" max="10000" class="input" placeholder="400" />
          </div>
          
          <div class="form-group">
            <label class="form-label">메모</label>
            <textarea id="defect-air-note" class="input" placeholder="공기질 측정 특이사항"></textarea>
          </div>
          
          <div class="form-group">
            <label class="form-label">결과</label>
            <select id="defect-air-result" class="input">
              <option value="normal">정상</option>
              <option value="check">확인요망</option>
              <option value="na">해당없음</option>
            </select>
          </div>
        </div>

        <!-- 라돈 탭 -->
        <div id="defect-radon-tab" class="equipment-tab-content hidden">
          <div class="form-group">
            <label class="form-label">위치</label>
            <input id="defect-radon-location" class="input" placeholder="예: 침실, 거실" />
          </div>
          
          <div class="form-group">
            <label class="form-label">공정</label>
            <input id="defect-radon-trade" class="input" placeholder="예: 마감, 바닥재" />
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">라돈 농도</label>
              <input id="defect-radon-value" type="number" step="0.01" min="0" max="5000" class="input" placeholder="0.00" />
            </div>
            <div class="form-group">
              <label class="form-label">단위</label>
              <select id="defect-radon-unit" class="input">
                <option value="Bq/m³">Bq/m³</option>
                <option value="pCi/L">pCi/L</option>
              </select>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">메모</label>
            <textarea id="defect-radon-note" class="input" placeholder="라돈 측정 특이사항"></textarea>
          </div>
          
          <div class="form-group">
            <label class="form-label">결과</label>
            <select id="defect-radon-result" class="input">
              <option value="normal">정상</option>
              <option value="check">확인요망</option>
              <option value="na">해당없음</option>
            </select>
          </div>
        </div>

        <!-- 레벨기 탭 -->
        <div id="defect-level-tab" class="equipment-tab-content hidden">
          <div class="form-group">
            <label class="form-label">위치</label>
            <input id="defect-level-location" class="input" placeholder="예: 주방, 거실" />
          </div>
          
          <div class="form-group">
            <label class="form-label">공정</label>
            <input id="defect-level-trade" class="input" placeholder="예: 바닥, 타일" />
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">좌측 (mm)</label>
              <input id="defect-level-left" type="number" step="0.1" min="-50" max="50" class="input" placeholder="0.0" />
            </div>
            <div class="form-group">
              <label class="form-label">우측 (mm)</label>
              <input id="defect-level-right" type="number" step="0.1" min="-50" max="50" class="input" placeholder="0.0" />
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">메모</label>
            <textarea id="defect-level-note" class="input" placeholder="레벨기 측정 특이사항"></textarea>
          </div>
          
          <div class="form-group">
            <label class="form-label">결과</label>
            <select id="defect-level-result" class="input">
              <option value="normal">이상없음</option>
              <option value="check">확인요망</option>
              <option value="na">해당없음</option>
            </select>
          </div>
        </div>

        <!-- 저장 버튼 -->
        <div class="button-group" style="margin-top: 20px;">
          <button class="button" onclick="resetDefectInspectionForm()">재설정</button>
          <button class="button success" onclick="saveDefectInspection()">저장</button>
        </div>
      </div>
    </div>
  </div>

  <div class="toast"></div>
</div>

<script src="js/api.js"></script>
<script src="js/inspector.js"></script>
</body>
</html>

